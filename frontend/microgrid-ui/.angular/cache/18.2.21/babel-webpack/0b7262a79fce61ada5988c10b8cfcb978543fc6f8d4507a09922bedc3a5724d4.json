{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/ASUS/Documents/GitHub/seminario-integrador/frontend/microgrid-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule, Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/api.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"../../services/data.service\";\nimport * as i5 from \"@angular/common\";\nfunction ConfiguracionComponent_span_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(ctx_r0.error);\n  }\n}\nexport let ConfiguracionComponent = /*#__PURE__*/(() => {\n  class ConfiguracionComponent {\n    constructor(fb, api, router, data) {\n      this.fb = fb;\n      this.api = api;\n      this.router = router;\n      this.data = data;\n      this.busy = false;\n      this.error = '';\n      this.form = this.fb.group({\n        years: [2024, [Validators.required]],\n        n_scenarios: [10, [Validators.required, Validators.min(1)]],\n        robustness: [0.95, [Validators.min(0), Validators.max(1)]],\n        nse: [0.03, [Validators.min(0), Validators.max(1)]],\n        amax: [500, [Validators.min(0)]]\n      });\n    }\n    simular() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        if (_this.form.invalid) return;\n        _this.busy = true;\n        _this.error = '';\n        const res = yield _this.api.simulate({\n          zni: _this.data.zni$.getValue()\n        });\n        _this.busy = false;\n        if (!res.ok) {\n          _this.error = res.error ?? 'Error en simulación';\n          return;\n        }\n        _this.router.navigate(['/resultados'], {\n          queryParams: {\n            runId: res.data.runId\n          }\n        });\n      })();\n    }\n    static {\n      this.ɵfac = function ConfiguracionComponent_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || ConfiguracionComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.ApiService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.DataService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: ConfiguracionComponent,\n        selectors: [[\"app-configuracion\"]],\n        standalone: true,\n        features: [i0.ɵɵStandaloneFeature],\n        decls: 22,\n        vars: 4,\n        consts: [[1, \"form-grid\", 3, \"formGroup\"], [\"type\", \"number\", \"formControlName\", \"years\"], [\"type\", \"number\", \"formControlName\", \"n_scenarios\"], [\"type\", \"number\", \"step\", \"0.01\", \"formControlName\", \"robustness\"], [\"type\", \"number\", \"step\", \"0.01\", \"formControlName\", \"nse\"], [\"type\", \"number\", \"formControlName\", \"amax\"], [1, \"actions\"], [1, \"btn\", 3, \"click\", \"disabled\"], [\"class\", \"error\", 4, \"ngIf\"], [1, \"error\"]],\n        template: function ConfiguracionComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"h1\");\n            i0.ɵɵtext(1, \"Configuraci\\u00F3n\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(2, \"form\", 0)(3, \"label\");\n            i0.ɵɵtext(4, \"A\\u00F1o base \");\n            i0.ɵɵelement(5, \"input\", 1);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"label\");\n            i0.ɵɵtext(7, \"Escenarios \");\n            i0.ɵɵelement(8, \"input\", 2);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"label\");\n            i0.ɵɵtext(10, \"Robustez \");\n            i0.ɵɵelement(11, \"input\", 3);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(12, \"label\");\n            i0.ɵɵtext(13, \"NSE \");\n            i0.ɵɵelement(14, \"input\", 4);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"label\");\n            i0.ɵɵtext(16, \"\\u00C1rea m\\u00E1x (m\\u00B2) \");\n            i0.ɵɵelement(17, \"input\", 5);\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(18, \"div\", 6)(19, \"button\", 7);\n            i0.ɵɵlistener(\"click\", function ConfiguracionComponent_Template_button_click_19_listener() {\n              return ctx.simular();\n            });\n            i0.ɵɵtext(20);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(21, ConfiguracionComponent_span_21_Template, 2, 1, \"span\", 8);\n            i0.ɵɵelementEnd();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(17);\n            i0.ɵɵproperty(\"disabled\", ctx.busy || ctx.form.invalid);\n            i0.ɵɵadvance();\n            i0.ɵɵtextInterpolate(ctx.busy ? \"Simulando\\u2026\" : \"Ejecutar simulaci\\u00F3n\");\n            i0.ɵɵadvance();\n            i0.ɵɵproperty(\"ngIf\", ctx.error);\n          }\n        },\n        dependencies: [CommonModule, i5.NgIf, ReactiveFormsModule, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        styles: [\".form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}\\n.form-grid[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}\\n@media (max-width:900px){ .form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr} }\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvY29uZmlndXJhY2lvbi9jb25maWd1cmFjaW9uLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsV0FBVyxZQUFZLENBQUMsbUNBQW1DLENBQUMsUUFBUTtBQUNwRSxpQkFBaUIsWUFBWSxDQUFDLHFCQUFxQixDQUFDLE9BQU87QUFDM0QsMEJBQTBCLFdBQVcseUJBQXlCLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyIuZm9ybS1ncmlke2Rpc3BsYXk6Z3JpZDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6cmVwZWF0KDMsMWZyKTtnYXA6MTJweH1cbi5mb3JtLWdyaWQgbGFiZWx7ZGlzcGxheTpmbGV4O2ZsZXgtZGlyZWN0aW9uOmNvbHVtbjtnYXA6NnB4fVxuQG1lZGlhIChtYXgtd2lkdGg6OTAwcHgpeyAuZm9ybS1ncmlke2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnJ9IH1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n      });\n    }\n  }\n  return ConfiguracionComponent;\n})();","map":{"version":3,"names":["CommonModule","ReactiveFormsModule","Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ctx_r0","error","ConfiguracionComponent","constructor","fb","api","router","data","busy","form","group","years","required","n_scenarios","min","robustness","max","nse","amax","simular","_this","_asyncToGenerator","invalid","res","simulate","zni","zni$","getValue","ok","navigate","queryParams","runId","ɵɵdirectiveInject","i1","FormBuilder","i2","ApiService","i3","Router","i4","DataService","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","ConfiguracionComponent_Template","rf","ctx","ɵɵelement","ɵɵlistener","ConfiguracionComponent_Template_button_click_19_listener","ɵɵtemplate","ConfiguracionComponent_span_21_Template","ɵɵproperty","i5","NgIf","ɵNgNoValidate","DefaultValueAccessor","NumberValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","styles"],"sources":["C:\\Users\\ASUS\\Documents\\GitHub\\seminario-integrador\\frontend\\microgrid-ui\\src\\app\\pages\\configuracion\\configuracion.component.ts","C:\\Users\\ASUS\\Documents\\GitHub\\seminario-integrador\\frontend\\microgrid-ui\\src\\app\\pages\\configuracion\\configuracion.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormBuilder, ReactiveFormsModule, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { ApiService } from '../../services/api.service';\nimport { DataService } from '../../services/data.service';\n@Component({\n  standalone: true, imports:[CommonModule, ReactiveFormsModule], selector:'app-configuracion',\n  templateUrl:'./configuracion.component.html', styleUrls:['./configuracion.component.css']\n}) export class ConfiguracionComponent {\n  form: ReturnType<FormBuilder['group']>; busy=false; error='';\n  constructor(private fb: FormBuilder, private api: ApiService, private router: Router, public data: DataService){\n    this.form = this.fb.group({ years:[2024,[Validators.required]], n_scenarios:[10,[Validators.required,Validators.min(1)]],\n      robustness:[0.95,[Validators.min(0),Validators.max(1)]], nse:[0.03,[Validators.min(0),Validators.max(1)]], amax:[500,[Validators.min(0)]] });\n  }\n  async simular(){ if(this.form.invalid) return; this.busy=true; this.error='';\n    const res = await this.api.simulate({ zni: this.data.zni$.getValue() }); this.busy=false;\n    if(!res.ok){ this.error = res.error ?? 'Error en simulación'; return; }\n    this.router.navigate(['/resultados'], { queryParams: { runId: res.data!.runId }}); }\n}\n","<h1>Configuración</h1>\n<form [formGroup]=\"form\" class=\"form-grid\">\n  <label>Año base <input type=\"number\" formControlName=\"years\"></label>\n  <label>Escenarios <input type=\"number\" formControlName=\"n_scenarios\"></label>\n  <label>Robustez <input type=\"number\" step=\"0.01\" formControlName=\"robustness\"></label>\n  <label>NSE <input type=\"number\" step=\"0.01\" formControlName=\"nse\"></label>\n  <label>Área máx (m²) <input type=\"number\" formControlName=\"amax\"></label>\n</form>\n<div class=\"actions\">\n  <button class=\"btn\" [disabled]=\"busy || form.invalid\" (click)=\"simular()\">{{ busy ? 'Simulando…' : 'Ejecutar simulación' }}</button>\n  <span class=\"error\" *ngIf=\"error\">{{error}}</span>\n</div>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}